{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Brian\\\\Projects\\\\ResearchHub\\\\research-hub\\\\client\\\\src\\\\routes\\\\Publish\\\\index.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { Logger } from '@oceanprotocol/squid';\nimport Web3 from 'web3';\nimport Route from '../../components/templates/Route';\nimport Form from '../../components/atoms/Form/Form';\nimport AssetModel from '../../models/AssetModel';\nimport { User, Market } from '../../context';\nimport Step from './Step';\nimport Progress from './Progress';\nimport ReactGA from 'react-ga';\nimport { allowPricing } from '../../config';\nimport { steps } from '../../data/form-publish.json';\nimport Content from '../../components/atoms/Content';\nimport withTracker from '../../hoc/withTracker';\n\nif (allowPricing) {\n  steps[0].fields.price = {\n    label: 'Price',\n    placeholder: 'Price in Ocean tokens',\n    type: 'string',\n    required: true,\n    help: 'Enter the price of assets in Ocean tokens.'\n  };\n}\n\nvar Publish =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Publish, _Component);\n\n  function Publish() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Publish);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Publish)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      name: '',\n      dateCreated: new Date().toISOString(),\n      description: '',\n      files: [],\n      price: '0',\n      author: '',\n      type: 'dataset',\n      license: '',\n      copyrightHolder: '',\n      categories: '',\n      currentStep: 1,\n      isPublishing: false,\n      isPublished: false,\n      publishedDid: '',\n      publishingError: '',\n      publishingStep: 0,\n      validationStatus: {\n        1: {\n          name: false,\n          files: false,\n          allFieldsValid: false\n        },\n        2: {\n          description: false,\n          allFieldsValid: false\n        },\n        3: {\n          author: false,\n          copyrightHolder: false,\n          license: false,\n          allFieldsValid: false\n        }\n      }\n    };\n\n    _this.inputChange = function (event) {\n      _this.validateInputs(event.currentTarget.name, event.currentTarget.value);\n\n      _this.setState(_defineProperty({}, event.currentTarget.name, event.currentTarget.value));\n    };\n\n    _this.next = function () {\n      var currentStep = _this.state.currentStep;\n      var totalSteps = steps.length;\n      currentStep = currentStep >= totalSteps - 1 ? totalSteps : currentStep + 1;\n      ReactGA.event({\n        category: 'Publish',\n        action: 'nextStep ' + currentStep\n      });\n\n      _this.setState({\n        currentStep: currentStep\n      });\n    };\n\n    _this.prev = function () {\n      var currentStep = _this.state.currentStep;\n      currentStep = currentStep <= 1 ? 1 : currentStep - 1;\n\n      _this.setState({\n        currentStep: currentStep\n      });\n    };\n\n    _this.tryAgain = function () {\n      _this.setState({\n        publishingError: ''\n      });\n    };\n\n    _this.toStart = function () {\n      _this.setState({\n        name: '',\n        dateCreated: new Date().toISOString(),\n        description: '',\n        files: [],\n        price: '0',\n        author: '',\n        type: 'dataset',\n        license: '',\n        copyrightHolder: '',\n        categories: '',\n        isPublishing: false,\n        isPublished: false,\n        publishingStep: 0,\n        currentStep: 1\n      });\n    };\n\n    _this.validateInputs = function (name, value) {\n      var hasContent = value.length > 0; // Setting state for all fields\n\n      if (hasContent) {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, _defineProperty({}, _this.state.currentStep, _objectSpread({}, prevState.validationStatus[_this.state.currentStep], _defineProperty({}, name, true))))\n          };\n        }, _this.runValidation);\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, _defineProperty({}, _this.state.currentStep, _objectSpread({}, prevState.validationStatus[_this.state.currentStep], _defineProperty({}, name, false))))\n          };\n        }, _this.runValidation);\n      }\n    };\n\n    _this.runValidation = function () {\n      var validationStatus = _this.state.validationStatus; //\n      // Step 1\n      //\n\n      if (validationStatus[1].name && validationStatus[1].files) {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, {\n              1: _objectSpread({}, prevState.validationStatus[1], {\n                allFieldsValid: true\n              })\n            })\n          };\n        });\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, {\n              1: _objectSpread({}, prevState.validationStatus[1], {\n                allFieldsValid: false\n              })\n            })\n          };\n        });\n      } //\n      // Step 2\n      //\n\n\n      if (validationStatus[2].description) {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, {\n              2: _objectSpread({}, prevState.validationStatus[2], {\n                allFieldsValid: true\n              })\n            })\n          };\n        });\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, {\n              2: _objectSpread({}, prevState.validationStatus[2], {\n                allFieldsValid: false\n              })\n            })\n          };\n        });\n      } //\n      // Step 3\n      //\n\n\n      if (validationStatus[3].author && validationStatus[3].copyrightHolder && validationStatus[3].license) {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, {\n              3: _objectSpread({}, prevState.validationStatus[3], {\n                allFieldsValid: true\n              })\n            })\n          };\n        });\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            validationStatus: _objectSpread({}, prevState.validationStatus, {\n              3: _objectSpread({}, prevState.validationStatus[3], {\n                allFieldsValid: false\n              })\n            })\n          };\n        });\n      }\n    };\n\n    _this.registerAsset =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var ocean, account, files, newAsset, asset;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                ReactGA.event({\n                  category: 'Publish',\n                  action: 'registerAsset-start'\n                });\n\n                _this.setState({\n                  publishingError: '',\n                  isPublishing: true,\n                  publishingStep: 0\n                });\n\n                ocean = _this.context.ocean;\n                _context.next = 6;\n                return ocean.accounts.list();\n\n              case 6:\n                account = _context.sent;\n                // remove `found` attribute from all File objects\n                // in a new array\n                files = _this.state.files.map( // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                function (_ref2) {\n                  var found = _ref2.found,\n                      keepAttrs = _objectWithoutProperties(_ref2, [\"found\"]);\n\n                  return keepAttrs;\n                });\n                newAsset = {\n                  // OEP-08 Attributes\n                  // https://github.com/oceanprotocol/OEPs/tree/master/8\n                  main: Object.assign(AssetModel.main, {\n                    type: _this.state.type,\n                    name: _this.state.name,\n                    dateCreated: new Date(_this.state.dateCreated).toISOString().split('.')[0] + 'Z',\n                    // remove milliseconds\n                    author: _this.state.author,\n                    license: _this.state.license,\n                    price: allowPricing ? Web3.utils.toWei(_this.state.price, 'ether') : _this.state.price,\n                    files: files\n                  }),\n                  additionalInformation: Object.assign(AssetModel.additionalInformation, {\n                    description: _this.state.description,\n                    copyrightHolder: _this.state.copyrightHolder,\n                    categories: ['Alexa'] // this.state.categories\n\n                  })\n                };\n                _context.prev = 9;\n                _context.next = 12;\n                return _this.context.ocean.assets.create(newAsset, account[0]).next(function (publishingStep) {\n                  return _this.setState({\n                    publishingStep: publishingStep\n                  });\n                });\n\n              case 12:\n                asset = _context.sent;\n\n                _this.setState({\n                  publishedDid: asset.id,\n                  isPublished: true\n                });\n\n                ReactGA.event({\n                  category: 'Publish',\n                  action: \"registerAsset-end \".concat(asset.id)\n                });\n                _context.next = 22;\n                break;\n\n              case 17:\n                _context.prev = 17;\n                _context.t0 = _context[\"catch\"](9);\n                // make readable errors\n                Logger.error('error:', _context.t0.message);\n\n                _this.setState({\n                  publishingError: _context.t0.message\n                });\n\n                ReactGA.event({\n                  category: 'Publish',\n                  action: \"registerAsset-error \".concat(_context.t0.message)\n                });\n\n              case 22:\n                _this.setState({\n                  isPublishing: false\n                });\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[9, 17]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Publish, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Market.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, function (market) {\n        return React.createElement(Route, {\n          title: \"Publish\",\n          description: \"Publish voice app data to the Ocean Protocol \".concat(market.network, \" network.\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319\n          },\n          __self: this\n        }, React.createElement(Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }, React.createElement(Progress, {\n          steps: steps,\n          currentStep: _this2.state.currentStep,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324\n          },\n          __self: this\n        }), React.createElement(Form, {\n          onSubmit: _this2.registerAsset,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326\n          },\n          __self: this\n        }, steps.map(function (step, index) {\n          return React.createElement(Step, {\n            key: index,\n            index: index,\n            title: step.title,\n            description: step.description,\n            currentStep: _this2.state.currentStep,\n            fields: step.fields,\n            inputChange: _this2.inputChange,\n            state: _this2.state,\n            next: _this2.next,\n            prev: _this2.prev,\n            totalSteps: steps.length,\n            tryAgain: _this2.tryAgain,\n            toStart: _this2.toStart,\n            content: step.content,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 328\n            },\n            __self: this\n          });\n        }))));\n      });\n    }\n  }]);\n\n  return Publish;\n}(Component);\n\nPublish.contextType = User;\nexport default withTracker(Publish);","map":{"version":3,"sources":["C:/Users/Brian/Projects/ResearchHub/research-hub/client/src/routes/Publish/index.tsx"],"names":["React","Component","Logger","Web3","Route","Form","AssetModel","User","Market","Step","Progress","ReactGA","allowPricing","steps","Content","withTracker","fields","price","label","placeholder","type","required","help","Publish","state","name","dateCreated","Date","toISOString","description","files","author","license","copyrightHolder","categories","currentStep","isPublishing","isPublished","publishedDid","publishingError","publishingStep","validationStatus","allFieldsValid","inputChange","event","validateInputs","currentTarget","value","setState","next","totalSteps","length","category","action","prev","tryAgain","toStart","hasContent","prevState","runValidation","registerAsset","preventDefault","ocean","context","accounts","list","account","map","found","keepAttrs","newAsset","main","Object","assign","split","utils","toWei","additionalInformation","assets","create","asset","id","error","message","market","network","step","index","title","content","contextType"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAA6BC,SAA7B,QAAyD,OAAzD;AACA,SAASC,MAAT,QAA6B,sBAA7B;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,kCAAlB;AACA,OAAOC,IAAP,MAAiB,kCAAjB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,eAA7B;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,OAAP,MAAoB,UAApB;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,SAASC,KAAT,QAAsB,8BAAtB;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;;AAyBA,IAAIH,YAAJ,EAAkB;AAChBC,EAAAA,KAAD,CAAe,CAAf,EAAkBG,MAAlB,CAAyBC,KAAzB,GAAiC;AAChCC,IAAAA,KAAK,EAAE,OADyB;AAEhCC,IAAAA,WAAW,EAAE,uBAFmB;AAGhCC,IAAAA,IAAI,EAAE,QAH0B;AAIhCC,IAAAA,QAAQ,EAAE,IAJsB;AAKhCC,IAAAA,IAAI,EAAE;AAL0B,GAAjC;AAOA;;IAEKC,O;;;;;;;;;;;;;;;;;UAGEC,K,GAAQ;AACdC,MAAAA,IAAI,EAAE,EADQ;AAEdC,MAAAA,WAAW,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EAFC;AAGdC,MAAAA,WAAW,EAAE,EAHC;AAIdC,MAAAA,KAAK,EAAE,EAJO;AAKdb,MAAAA,KAAK,EAAE,GALO;AAMdc,MAAAA,MAAM,EAAE,EANM;AAOdX,MAAAA,IAAI,EAAE,SAPQ;AAQdY,MAAAA,OAAO,EAAE,EARK;AASdC,MAAAA,eAAe,EAAE,EATH;AAUdC,MAAAA,UAAU,EAAE,EAVE;AAYdC,MAAAA,WAAW,EAAE,CAZC;AAadC,MAAAA,YAAY,EAAE,KAbA;AAcdC,MAAAA,WAAW,EAAE,KAdC;AAedC,MAAAA,YAAY,EAAE,EAfA;AAgBdC,MAAAA,eAAe,EAAE,EAhBH;AAiBdC,MAAAA,cAAc,EAAE,CAjBF;AAkBdC,MAAAA,gBAAgB,EAAE;AACjB,WAAG;AAAEhB,UAAAA,IAAI,EAAE,KAAR;AAAeK,UAAAA,KAAK,EAAE,KAAtB;AAA6BY,UAAAA,cAAc,EAAE;AAA7C,SADc;AAEjB,WAAG;AACFb,UAAAA,WAAW,EAAE,KADX;AAEFa,UAAAA,cAAc,EAAE;AAFd,SAFc;AAMjB,WAAG;AACFX,UAAAA,MAAM,EAAE,KADN;AAEFE,UAAAA,eAAe,EAAE,KAFf;AAGFD,UAAAA,OAAO,EAAE,KAHP;AAIFU,UAAAA,cAAc,EAAE;AAJd;AANc;AAlBJ,K;;UAiCPC,W,GAAc,UAACC,KAAD,EAA2E;AAChG,YAAKC,cAAL,CAAoBD,KAAK,CAACE,aAAN,CAAoBrB,IAAxC,EAA8CmB,KAAK,CAACE,aAAN,CAAoBC,KAAlE;;AAEA,YAAKC,QAAL,qBACEJ,KAAK,CAACE,aAAN,CAAoBrB,IADtB,EAC6BmB,KAAK,CAACE,aAAN,CAAoBC,KADjD;AAGA,K;;UAEOE,I,GAAO,YAAM;AAAA,UACdd,WADc,GACE,MAAKX,KADP,CACdW,WADc;AAEpB,UAAMe,UAAU,GAAGrC,KAAK,CAACsC,MAAzB;AAEAhB,MAAAA,WAAW,GAAGA,WAAW,IAAIe,UAAU,GAAG,CAA5B,GAAgCA,UAAhC,GAA6Cf,WAAW,GAAG,CAAzE;AAEAxB,MAAAA,OAAO,CAACiC,KAAR,CAAc;AACbQ,QAAAA,QAAQ,EAAE,SADG;AAEbC,QAAAA,MAAM,EAAE,cAAclB;AAFT,OAAd;;AAKA,YAAKa,QAAL,CAAc;AAAEb,QAAAA,WAAW,EAAXA;AAAF,OAAd;AACA,K;;UAEOmB,I,GAAO,YAAM;AAAA,UACdnB,WADc,GACE,MAAKX,KADP,CACdW,WADc;AAEpBA,MAAAA,WAAW,GAAGA,WAAW,IAAI,CAAf,GAAmB,CAAnB,GAAuBA,WAAW,GAAG,CAAnD;;AACA,YAAKa,QAAL,CAAc;AAAEb,QAAAA,WAAW,EAAXA;AAAF,OAAd;AACA,K;;UAEOoB,Q,GAAW,YAAM;AACxB,YAAKP,QAAL,CAAc;AAAET,QAAAA,eAAe,EAAE;AAAnB,OAAd;AACA,K;;UAEOiB,O,GAAU,YAAM;AACvB,YAAKR,QAAL,CAAc;AACbvB,QAAAA,IAAI,EAAE,EADO;AAEbC,QAAAA,WAAW,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EAFA;AAGbC,QAAAA,WAAW,EAAE,EAHA;AAIbC,QAAAA,KAAK,EAAE,EAJM;AAKbb,QAAAA,KAAK,EAAE,GALM;AAMbc,QAAAA,MAAM,EAAE,EANK;AAObX,QAAAA,IAAI,EAAE,SAPO;AAQbY,QAAAA,OAAO,EAAE,EARI;AASbC,QAAAA,eAAe,EAAE,EATJ;AAUbC,QAAAA,UAAU,EAAE,EAVC;AAWbE,QAAAA,YAAY,EAAE,KAXD;AAYbC,QAAAA,WAAW,EAAE,KAZA;AAabG,QAAAA,cAAc,EAAE,CAbH;AAcbL,QAAAA,WAAW,EAAE;AAdA,OAAd;AAgBA,K;;UAEOU,c,GAAiB,UAACpB,IAAD,EAAesB,KAAf,EAAiC;AACzD,UAAMU,UAAU,GAAGV,KAAK,CAACI,MAAN,GAAe,CAAlC,CADyD,CAGzD;;AACA,UAAIM,UAAJ,EAAgB;AACf,cAAKT,QAAL,CACC,UAACU,SAAD;AAAA,iBAAgB;AACfjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE,sBAEd,MAAKjB,KAAL,CAAWW,WAFG,oBAGXuB,SAAS,CAACjB,gBAAV,CAA2B,MAAKjB,KAAL,CAAWW,WAAtC,CAHW,sBAIbV,IAJa,EAIN,IAJM;AADD,WAAhB;AAAA,SADD,EAUC,MAAKkC,aAVN;AAYA,OAbD,MAaO;AACN,cAAKX,QAAL,CACC,UAACU,SAAD;AAAA,iBAAgB;AACfjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE,sBAEd,MAAKjB,KAAL,CAAWW,WAFG,oBAGXuB,SAAS,CAACjB,gBAAV,CAA2B,MAAKjB,KAAL,CAAWW,WAAtC,CAHW,sBAIbV,IAJa,EAIN,KAJM;AADD,WAAhB;AAAA,SADD,EAUC,MAAKkC,aAVN;AAYA;AACD,K;;UAEOA,a,GAAgB,YAAM;AAAA,UACrBlB,gBADqB,GACA,MAAKjB,KADL,CACrBiB,gBADqB,EAE7B;AACA;AACA;;AACA,UAAIA,gBAAgB,CAAC,CAAD,CAAhB,CAAoBhB,IAApB,IAA4BgB,gBAAgB,CAAC,CAAD,CAAhB,CAAoBX,KAApD,EAA2D;AAC1D,cAAKkB,QAAL,CAAc,UAACU,SAAD;AAAA,iBAAgB;AAC7BjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE;AAEf,mCACIiB,SAAS,CAACjB,gBAAV,CAA2B,CAA3B,CADJ;AAECC,gBAAAA,cAAc,EAAE;AAFjB;AAFe;AADa,WAAhB;AAAA,SAAd;AASA,OAVD,MAUO;AACN,cAAKM,QAAL,CAAc,UAACU,SAAD;AAAA,iBAAgB;AAC7BjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE;AAEf,mCACIiB,SAAS,CAACjB,gBAAV,CAA2B,CAA3B,CADJ;AAECC,gBAAAA,cAAc,EAAE;AAFjB;AAFe;AADa,WAAhB;AAAA,SAAd;AASA,OAzB4B,CA2B7B;AACA;AACA;;;AACA,UAAID,gBAAgB,CAAC,CAAD,CAAhB,CAAoBZ,WAAxB,EAAqC;AACpC,cAAKmB,QAAL,CAAc,UAACU,SAAD;AAAA,iBAAgB;AAC7BjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE;AAEf,mCACIiB,SAAS,CAACjB,gBAAV,CAA2B,CAA3B,CADJ;AAECC,gBAAAA,cAAc,EAAE;AAFjB;AAFe;AADa,WAAhB;AAAA,SAAd;AASA,OAVD,MAUO;AACN,cAAKM,QAAL,CAAc,UAACU,SAAD;AAAA,iBAAgB;AAC7BjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE;AAEf,mCACIiB,SAAS,CAACjB,gBAAV,CAA2B,CAA3B,CADJ;AAECC,gBAAAA,cAAc,EAAE;AAFjB;AAFe;AADa,WAAhB;AAAA,SAAd;AASA,OAlD4B,CAoD7B;AACA;AACA;;;AACA,UAAID,gBAAgB,CAAC,CAAD,CAAhB,CAAoBV,MAApB,IAA8BU,gBAAgB,CAAC,CAAD,CAAhB,CAAoBR,eAAlD,IAAqEQ,gBAAgB,CAAC,CAAD,CAAhB,CAAoBT,OAA7F,EAAsG;AACrG,cAAKgB,QAAL,CAAc,UAACU,SAAD;AAAA,iBAAgB;AAC7BjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE;AAEf,mCACIiB,SAAS,CAACjB,gBAAV,CAA2B,CAA3B,CADJ;AAECC,gBAAAA,cAAc,EAAE;AAFjB;AAFe;AADa,WAAhB;AAAA,SAAd;AASA,OAVD,MAUO;AACN,cAAKM,QAAL,CAAc,UAACU,SAAD;AAAA,iBAAgB;AAC7BjB,YAAAA,gBAAgB,oBACZiB,SAAS,CAACjB,gBADE;AAEf,mCACIiB,SAAS,CAACjB,gBAAV,CAA2B,CAA3B,CADJ;AAECC,gBAAAA,cAAc,EAAE;AAFjB;AAFe;AADa,WAAhB;AAAA,SAAd;AASA;AACD,K;;UAEOkB,a;;;;;+BAAgB,iBAAOhB,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBA,gBAAAA,KAAK,CAACiB,cAAN;AAEAlD,gBAAAA,OAAO,CAACiC,KAAR,CAAc;AAAEQ,kBAAAA,QAAQ,EAAE,SAAZ;AAAuBC,kBAAAA,MAAM,EAAE;AAA/B,iBAAd;;AAEA,sBAAKL,QAAL,CAAc;AACbT,kBAAAA,eAAe,EAAE,EADJ;AAEbH,kBAAAA,YAAY,EAAE,IAFD;AAGbI,kBAAAA,cAAc,EAAE;AAHH,iBAAd;;AAMQsB,gBAAAA,KAXe,GAWL,MAAKC,OAXA,CAWfD,KAXe;AAAA;AAAA,uBAYDA,KAAK,CAACE,QAAN,CAAeC,IAAf,EAZC;;AAAA;AAYjBC,gBAAAA,OAZiB;AAcvB;AACA;AACMpC,gBAAAA,KAhBiB,GAgBT,MAAKN,KAAL,CAAWM,KAAX,CAAiBqC,GAAjB,EACb;AACA;AAAA,sBAAGC,KAAH,SAAGA,KAAH;AAAA,sBAAaC,SAAb;;AAAA,yBAAiDA,SAAjD;AAAA,iBAFa,CAhBS;AAqBjBC,gBAAAA,QArBiB,GAqBN;AAChB;AACA;AACAC,kBAAAA,IAAI,EAAEC,MAAM,CAACC,MAAP,CAAcnE,UAAU,CAACiE,IAAzB,EAA+B;AACpCnD,oBAAAA,IAAI,EAAE,MAAKI,KAAL,CAAWJ,IADmB;AAEpCK,oBAAAA,IAAI,EAAE,MAAKD,KAAL,CAAWC,IAFmB;AAGpCC,oBAAAA,WAAW,EAAE,IAAIC,IAAJ,CAAS,MAAKH,KAAL,CAAWE,WAApB,EAAiCE,WAAjC,GAA+C8C,KAA/C,CAAqD,GAArD,EAA0D,CAA1D,IAA+D,GAHxC;AAG6C;AACjF3C,oBAAAA,MAAM,EAAE,MAAKP,KAAL,CAAWO,MAJiB;AAKpCC,oBAAAA,OAAO,EAAE,MAAKR,KAAL,CAAWQ,OALgB;AAMpCf,oBAAAA,KAAK,EAAEL,YAAY,GAAGT,IAAI,CAACwE,KAAL,CAAWC,KAAX,CAAiB,MAAKpD,KAAL,CAAWP,KAA5B,EAAmC,OAAnC,CAAH,GAAiD,MAAKO,KAAL,CAAWP,KAN3C;AAOpCa,oBAAAA,KAAK,EAALA;AAPoC,mBAA/B,CAHU;AAYhB+C,kBAAAA,qBAAqB,EAAEL,MAAM,CAACC,MAAP,CAAcnE,UAAU,CAACuE,qBAAzB,EAAgD;AACtEhD,oBAAAA,WAAW,EAAE,MAAKL,KAAL,CAAWK,WAD8C;AAEtEI,oBAAAA,eAAe,EAAE,MAAKT,KAAL,CAAWS,eAF0C;AAGtEC,oBAAAA,UAAU,EAAE,CAAE,OAAF,CAH0D,CAG9C;;AAH8C,mBAAhD;AAZP,iBArBM;AAAA;AAAA;AAAA,uBAyCF,MAAK6B,OAAL,CAAaD,KAAb,CAAmBgB,MAAnB,CAClBC,MADkB,CACXT,QADW,EACDJ,OAAO,CAAC,CAAD,CADN,EAElBjB,IAFkB,CAEb,UAACT,cAAD;AAAA,yBAA4B,MAAKQ,QAAL,CAAc;AAAER,oBAAAA,cAAc,EAAdA;AAAF,mBAAd,CAA5B;AAAA,iBAFa,CAzCE;;AAAA;AAyChBwC,gBAAAA,KAzCgB;;AA6CtB,sBAAKhC,QAAL,CAAc;AACbV,kBAAAA,YAAY,EAAE0C,KAAK,CAACC,EADP;AAEb5C,kBAAAA,WAAW,EAAE;AAFA,iBAAd;;AAKA1B,gBAAAA,OAAO,CAACiC,KAAR,CAAc;AACbQ,kBAAAA,QAAQ,EAAE,SADG;AAEbC,kBAAAA,MAAM,8BAAuB2B,KAAK,CAACC,EAA7B;AAFO,iBAAd;AAlDsB;AAAA;;AAAA;AAAA;AAAA;AAuDtB;AACA/E,gBAAAA,MAAM,CAACgF,KAAP,CAAa,QAAb,EAAuB,YAAMC,OAA7B;;AACA,sBAAKnC,QAAL,CAAc;AAAET,kBAAAA,eAAe,EAAE,YAAM4C;AAAzB,iBAAd;;AAEAxE,gBAAAA,OAAO,CAACiC,KAAR,CAAc;AACbQ,kBAAAA,QAAQ,EAAE,SADG;AAEbC,kBAAAA,MAAM,gCAAyB,YAAM8B,OAA/B;AAFO,iBAAd;;AA3DsB;AAiEvB,sBAAKnC,QAAL,CAAc;AAAEZ,kBAAAA,YAAY,EAAE;AAAhB,iBAAd;;AAjEuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;6BAoER;AAAA;;AACf,aACC,oBAAC,MAAD,CAAQ,QAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,UAACgD,MAAD;AAAA,eACA,oBAAC,KAAD;AACC,UAAA,KAAK,EAAC,SADP;AAEC,UAAA,WAAW,yDAAkDA,MAAM,CAACC,OAAzD,cAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAIC,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC,oBAAC,QAAD;AAAU,UAAA,KAAK,EAAExE,KAAjB;AAAwB,UAAA,WAAW,EAAE,MAAI,CAACW,KAAL,CAAWW,WAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADD,EAGC,oBAAC,IAAD;AAAM,UAAA,QAAQ,EAAE,MAAI,CAACyB,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE/C,KAAK,CAACsD,GAAN,CAAU,UAACmB,IAAD,EAAYC,KAAZ;AAAA,iBACV,oBAAC,IAAD;AACC,YAAA,GAAG,EAAEA,KADN;AAEC,YAAA,KAAK,EAAEA,KAFR;AAGC,YAAA,KAAK,EAAED,IAAI,CAACE,KAHb;AAIC,YAAA,WAAW,EAAEF,IAAI,CAACzD,WAJnB;AAKC,YAAA,WAAW,EAAE,MAAI,CAACL,KAAL,CAAWW,WALzB;AAMC,YAAA,MAAM,EAAEmD,IAAI,CAACtE,MANd;AAOC,YAAA,WAAW,EAAE,MAAI,CAAC2B,WAPnB;AAQC,YAAA,KAAK,EAAE,MAAI,CAACnB,KARb;AASC,YAAA,IAAI,EAAE,MAAI,CAACyB,IATZ;AAUC,YAAA,IAAI,EAAE,MAAI,CAACK,IAVZ;AAWC,YAAA,UAAU,EAAEzC,KAAK,CAACsC,MAXnB;AAYC,YAAA,QAAQ,EAAE,MAAI,CAACI,QAZhB;AAaC,YAAA,OAAO,EAAE,MAAI,CAACC,OAbf;AAcC,YAAA,OAAO,EAAE8B,IAAI,CAACG,OAdf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADU;AAAA,SAAV,CADF,CAHD,CAJD,CADA;AAAA,OADF,CADD;AAmCA;;;;EA9SoBxF,S;;AAAhBsB,O,CACSmE,W,GAAcnF,I;AAgT7B,eAAeQ,WAAW,CAACQ,OAAD,CAA1B","sourcesContent":["import React, { ChangeEvent, Component, FormEvent } from 'react';\r\nimport { Logger, File } from '@oceanprotocol/squid';\r\nimport Web3 from 'web3';\r\nimport Route from '../../components/templates/Route';\r\nimport Form from '../../components/atoms/Form/Form';\r\nimport AssetModel from '../../models/AssetModel';\r\nimport { User, Market } from '../../context';\r\nimport Step from './Step';\r\nimport Progress from './Progress';\r\nimport ReactGA from 'react-ga';\r\nimport { allowPricing } from '../../config';\r\nimport { steps } from '../../data/form-publish.json';\r\nimport Content from '../../components/atoms/Content';\r\nimport withTracker from '../../hoc/withTracker';\r\n\r\ntype AssetType = 'dataset' | 'algorithm' | 'container' | 'workflow' | 'other';\r\n\r\ninterface PublishState {\r\n\tname?: string;\r\n\tdateCreated?: string;\r\n\tprice?: string;\r\n\tauthor?: string;\r\n\tlicense?: string;\r\n\tdescription?: string;\r\n\tfiles?: File[];\r\n\ttype?: AssetType;\r\n\tcopyrightHolder?: string;\r\n\tcategories?: string;\r\n\r\n\tcurrentStep?: number;\r\n\tpublishingStep?: number;\r\n\tisPublishing?: boolean;\r\n\tisPublished?: boolean;\r\n\tpublishedDid?: string;\r\n\tpublishingError?: string;\r\n\tvalidationStatus?: any;\r\n}\r\n\r\nif (allowPricing) {\r\n\t(steps as any)[0].fields.price = {\r\n\t\tlabel: 'Price',\r\n\t\tplaceholder: 'Price in Ocean tokens',\r\n\t\ttype: 'string',\r\n\t\trequired: true,\r\n\t\thelp: 'Enter the price of assets in Ocean tokens.'\r\n\t};\r\n}\r\n\r\nclass Publish extends Component<{}, PublishState> {\r\n\tpublic static contextType = User;\r\n\r\n\tpublic state = {\r\n\t\tname: '',\r\n\t\tdateCreated: new Date().toISOString(),\r\n\t\tdescription: '',\r\n\t\tfiles: [],\r\n\t\tprice: '0',\r\n\t\tauthor: '',\r\n\t\ttype: 'dataset' as AssetType,\r\n\t\tlicense: '',\r\n\t\tcopyrightHolder: '',\r\n\t\tcategories: '',\r\n\r\n\t\tcurrentStep: 1,\r\n\t\tisPublishing: false,\r\n\t\tisPublished: false,\r\n\t\tpublishedDid: '',\r\n\t\tpublishingError: '',\r\n\t\tpublishingStep: 0,\r\n\t\tvalidationStatus: {\r\n\t\t\t1: { name: false, files: false, allFieldsValid: false },\r\n\t\t\t2: {\r\n\t\t\t\tdescription: false,\r\n\t\t\t\tallFieldsValid: false\r\n\t\t\t},\r\n\t\t\t3: {\r\n\t\t\t\tauthor: false,\r\n\t\t\t\tcopyrightHolder: false,\r\n\t\t\t\tlicense: false,\r\n\t\t\t\tallFieldsValid: false\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate inputChange = (event: ChangeEvent<HTMLInputElement> | ChangeEvent<HTMLSelectElement>) => {\r\n\t\tthis.validateInputs(event.currentTarget.name, event.currentTarget.value);\r\n\r\n\t\tthis.setState({\r\n\t\t\t[event.currentTarget.name]: event.currentTarget.value\r\n\t\t});\r\n\t};\r\n\r\n\tprivate next = () => {\r\n\t\tlet { currentStep } = this.state;\r\n\t\tconst totalSteps = steps.length;\r\n\r\n\t\tcurrentStep = currentStep >= totalSteps - 1 ? totalSteps : currentStep + 1;\r\n\r\n\t\tReactGA.event({\r\n\t\t\tcategory: 'Publish',\r\n\t\t\taction: 'nextStep ' + currentStep\r\n\t\t});\r\n\r\n\t\tthis.setState({ currentStep });\r\n\t};\r\n\r\n\tprivate prev = () => {\r\n\t\tlet { currentStep } = this.state;\r\n\t\tcurrentStep = currentStep <= 1 ? 1 : currentStep - 1;\r\n\t\tthis.setState({ currentStep });\r\n\t};\r\n\r\n\tprivate tryAgain = () => {\r\n\t\tthis.setState({ publishingError: '' });\r\n\t};\r\n\r\n\tprivate toStart = () => {\r\n\t\tthis.setState({\r\n\t\t\tname: '',\r\n\t\t\tdateCreated: new Date().toISOString(),\r\n\t\t\tdescription: '',\r\n\t\t\tfiles: [],\r\n\t\t\tprice: '0',\r\n\t\t\tauthor: '',\r\n\t\t\ttype: 'dataset' as AssetType,\r\n\t\t\tlicense: '',\r\n\t\t\tcopyrightHolder: '',\r\n\t\t\tcategories: '',\r\n\t\t\tisPublishing: false,\r\n\t\t\tisPublished: false,\r\n\t\t\tpublishingStep: 0,\r\n\t\t\tcurrentStep: 1\r\n\t\t});\r\n\t};\r\n\r\n\tprivate validateInputs = (name: string, value: string) => {\r\n\t\tconst hasContent = value.length > 0;\r\n\r\n\t\t// Setting state for all fields\r\n\t\tif (hasContent) {\r\n\t\t\tthis.setState(\r\n\t\t\t\t(prevState) => ({\r\n\t\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t\t[this.state.currentStep]: {\r\n\t\t\t\t\t\t\t...prevState.validationStatus[this.state.currentStep],\r\n\t\t\t\t\t\t\t[name]: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tthis.runValidation\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis.setState(\r\n\t\t\t\t(prevState) => ({\r\n\t\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t\t[this.state.currentStep]: {\r\n\t\t\t\t\t\t\t...prevState.validationStatus[this.state.currentStep],\r\n\t\t\t\t\t\t\t[name]: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tthis.runValidation\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate runValidation = () => {\r\n\t\tconst { validationStatus } = this.state;\r\n\t\t//\r\n\t\t// Step 1\r\n\t\t//\r\n\t\tif (validationStatus[1].name && validationStatus[1].files) {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t1: {\r\n\t\t\t\t\t\t...prevState.validationStatus[1],\r\n\t\t\t\t\t\tallFieldsValid: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t1: {\r\n\t\t\t\t\t\t...prevState.validationStatus[1],\r\n\t\t\t\t\t\tallFieldsValid: false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t//\r\n\t\t// Step 2\r\n\t\t//\r\n\t\tif (validationStatus[2].description) {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t2: {\r\n\t\t\t\t\t\t...prevState.validationStatus[2],\r\n\t\t\t\t\t\tallFieldsValid: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t2: {\r\n\t\t\t\t\t\t...prevState.validationStatus[2],\r\n\t\t\t\t\t\tallFieldsValid: false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t//\r\n\t\t// Step 3\r\n\t\t//\r\n\t\tif (validationStatus[3].author && validationStatus[3].copyrightHolder && validationStatus[3].license) {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t3: {\r\n\t\t\t\t\t\t...prevState.validationStatus[3],\r\n\t\t\t\t\t\tallFieldsValid: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tvalidationStatus: {\r\n\t\t\t\t\t...prevState.validationStatus,\r\n\t\t\t\t\t3: {\r\n\t\t\t\t\t\t...prevState.validationStatus[3],\r\n\t\t\t\t\t\tallFieldsValid: false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\tprivate registerAsset = async (event: FormEvent<HTMLFormElement>) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tReactGA.event({ category: 'Publish', action: 'registerAsset-start' });\r\n\r\n\t\tthis.setState({\r\n\t\t\tpublishingError: '',\r\n\t\t\tisPublishing: true,\r\n\t\t\tpublishingStep: 0\r\n\t\t});\r\n\r\n\t\tconst { ocean } = this.context;\r\n\t\tconst account = await ocean.accounts.list();\r\n\r\n\t\t// remove `found` attribute from all File objects\r\n\t\t// in a new array\r\n\t\tconst files = this.state.files.map(\r\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\t\t\t({ found, ...keepAttrs }: { found: boolean }) => keepAttrs\r\n\t\t);\r\n\r\n\t\tconst newAsset = {\r\n\t\t\t// OEP-08 Attributes\r\n\t\t\t// https://github.com/oceanprotocol/OEPs/tree/master/8\r\n\t\t\tmain: Object.assign(AssetModel.main, {\r\n\t\t\t\ttype: this.state.type,\r\n\t\t\t\tname: this.state.name,\r\n\t\t\t\tdateCreated: new Date(this.state.dateCreated).toISOString().split('.')[0] + 'Z', // remove milliseconds\r\n\t\t\t\tauthor: this.state.author,\r\n\t\t\t\tlicense: this.state.license,\r\n\t\t\t\tprice: allowPricing ? Web3.utils.toWei(this.state.price, 'ether') : this.state.price,\r\n\t\t\t\tfiles\r\n\t\t\t}),\r\n\t\t\tadditionalInformation: Object.assign(AssetModel.additionalInformation, {\r\n\t\t\t\tdescription: this.state.description,\r\n\t\t\t\tcopyrightHolder: this.state.copyrightHolder,\r\n\t\t\t\tcategories: [ 'Alexa' ] // this.state.categories\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst asset = await this.context.ocean.assets\r\n\t\t\t\t.create(newAsset, account[0])\r\n\t\t\t\t.next((publishingStep: number) => this.setState({ publishingStep }));\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tpublishedDid: asset.id,\r\n\t\t\t\tisPublished: true\r\n\t\t\t});\r\n\r\n\t\t\tReactGA.event({\r\n\t\t\t\tcategory: 'Publish',\r\n\t\t\t\taction: `registerAsset-end ${asset.id}`\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\t// make readable errors\r\n\t\t\tLogger.error('error:', error.message);\r\n\t\t\tthis.setState({ publishingError: error.message });\r\n\r\n\t\t\tReactGA.event({\r\n\t\t\t\tcategory: 'Publish',\r\n\t\t\t\taction: `registerAsset-error ${error.message}`\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({ isPublishing: false });\r\n\t};\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<Market.Consumer>\r\n\t\t\t\t{(market) => (\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\ttitle=\"Publish\"\r\n\t\t\t\t\t\tdescription={`Publish voice app data to the Ocean Protocol ${market.network} network.`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Content>\r\n\t\t\t\t\t\t\t<Progress steps={steps} currentStep={this.state.currentStep} />\r\n\r\n\t\t\t\t\t\t\t<Form onSubmit={this.registerAsset}>\r\n\t\t\t\t\t\t\t\t{steps.map((step: any, index: number) => (\r\n\t\t\t\t\t\t\t\t\t<Step\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\ttitle={step.title}\r\n\t\t\t\t\t\t\t\t\t\tdescription={step.description}\r\n\t\t\t\t\t\t\t\t\t\tcurrentStep={this.state.currentStep}\r\n\t\t\t\t\t\t\t\t\t\tfields={step.fields}\r\n\t\t\t\t\t\t\t\t\t\tinputChange={this.inputChange}\r\n\t\t\t\t\t\t\t\t\t\tstate={this.state}\r\n\t\t\t\t\t\t\t\t\t\tnext={this.next}\r\n\t\t\t\t\t\t\t\t\t\tprev={this.prev}\r\n\t\t\t\t\t\t\t\t\t\ttotalSteps={steps.length}\r\n\t\t\t\t\t\t\t\t\t\ttryAgain={this.tryAgain}\r\n\t\t\t\t\t\t\t\t\t\ttoStart={this.toStart}\r\n\t\t\t\t\t\t\t\t\t\tcontent={step.content}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t</Content>\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t)}\r\n\t\t\t</Market.Consumer>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withTracker(Publish);\r\n"]},"metadata":{},"sourceType":"module"}